<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Marya Vault ‚Ä¢ Pro Uploader</title>
<style>
 :root{--p:#dc143c;--pd:#b91c1c;--bg:#f8f9fc;--txt:#111827;--muted:#6b7280;--ok:#10b981;--err:#ef4444}
 *{box-sizing:border-box;margin:0}
 body{font:16px/1.6 system-ui,Segoe UI,Arial;background:linear-gradient(135deg,#fff 0%,var(--bg) 100%);color:var(--txt);padding:24px}
 .wrap{max-width:960px;margin:auto}
 header{display:flex;align-items:center;gap:18px;margin-bottom:28px}
 .logo{width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,var(--p),var(--pd));box-shadow:0 16px 28px rgba(0,0,0,.15)}
 h1{font-weight:900;font-size:2.2rem;background:linear-gradient(135deg,var(--p),var(--pd));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
 .sub{color:var(--muted)}
 .card{background:#fff;border:2px solid var(--p);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:32px}
 .drop{border:3px dashed rgba(220,20,60,.4);border-radius:12px;padding:60px 24px;text-align:center;cursor:pointer;background:rgba(220,20,60,.03);transition:.2s}
 .drop:hover,.drop.drag{border-color:var(--p);background:rgba(220,20,60,.08);transform:translateY(-2px)}
 .big{font-size:3.2rem;color:var(--p);margin-bottom:12px}
 .ttl{font-size:1.4rem;font-weight:800;color:var(--p)}
 .muted{color:var(--muted)}
 .badge{display:inline-block;background:var(--p);color:#fff;padding:6px 14px;border-radius:16px;font-size:.8rem;margin:6px 6px 0 0}
 .list{margin-top:26px}
 .item{background:#fff;border:1px solid rgba(220,20,60,.25);border-left:6px solid var(--p);border-radius:10px;padding:18px;margin-bottom:14px}
 .row{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
 .name{font-weight:700;word-break:break-all}
 .meta{color:var(--muted)}
 .bar{height:10px;background:#eceff3;border-radius:6px;overflow:hidden;margin:12px 0}
 .fill{height:100%;width:0;background:linear-gradient(90deg,var(--p),var(--pd))}
 .act a,.act button{display:inline-flex;align-items:center;gap:8px;background:var(--p);color:#fff;border:none;border-radius:8px;padding:10px 14px;font-weight:700;text-decoration:none;margin-right:10px;cursor:pointer}
 .act a:hover,.act button:hover{background:var(--pd)}
 .ok{color:var(--ok)} .err{color:var(--err)}
 .toast{position:fixed;right:18px;top:18px;background:var(--p);color:#fff;padding:14px 18px;border-radius:10px;box-shadow:0 12px 24px rgba(0,0,0,.15);transform:translateX(140%);transition:.3s}
 .toast.show{transform:none}
 @media(max-width:600px){ .drop{padding:38px} .big{font-size:2.4rem}}
</style>
</head>
<body>
<div class="wrap">
  <header><div class="logo"></div><div><h1>Marya Vault</h1><div class="sub">Professional Photo & Video Hosting</div></div></header>
  <div class="card">
    <div id="drop" class="drop">
      <div class="big">üìÅ</div><div class="ttl">Drop Files Here</div><div class="muted">or tap to browse</div>
      <div><span class="badge">Images</span><span class="badge">Videos</span><span class="badge">Docs</span></div>
    </div>
    <input id="picker" type="file" multiple hidden>
    <div id="list" class="list"></div>
  </div>
</div>
<div id="toast" class="toast">Done</div>

<script>
const drop=document.getElementById('drop'),pick=document.getElementById('picker'),list=document.getElementById('list'),toast=document.getElementById('toast');
drop.onclick=()=>pick.click();
['dragover','dragenter'].forEach(e=>drop.addEventListener(e,x=>{x.preventDefault();drop.classList.add('drag')}));
['dragleave','drop'].forEach(e=>drop.addEventListener(e,()=>drop.classList.remove('drag')));
drop.addEventListener('drop',e=>{e.preventDefault();handle(e.dataTransfer.files)});
pick.addEventListener('change',e=>handle(e.target.files));
function handle(files){[...files].forEach(f=>upload(f))}
function upload(file){
 const id=Math.random().toString(36).slice(2,8);
 list.insertAdjacentHTML('afterbegin',`
  <div class=item id="item-${id}">
   <div class=row><div class=name>${file.name}</div><div class=meta id="m-${id}">${fmt(file.size)} ‚Ä¢ starting‚Ä¶</div></div>
   <div class=bar><div class=fill id="f-${id}"></div></div>
   <div class=row act id="a-${id}"></div>
  </div>`);
 const fd=new FormData();fd.append('file',file);
 ajax('/upload',fd,p=>progress(id,p),res=>{
   if(res.needR2){showErr(id,'>50 MB limit; use Local Bot-API or MTProto');return;}
   res.success?done(id,file,res):showErr(id,res.error||'fail');
 });
}
function progress(id,p){document.getElementById('f-'+id).style.width=p+'%';document.getElementById('m-'+id).textContent=document.getElementById('m-'+id).textContent.replace(/‚Ä¢.*/,'‚Ä¢ '+p.toFixed(0)+' %');}
function done(id,f,r){
 document.getElementById('m-'+id).innerHTML=`${fmt(f.size)} ‚Ä¢ <span class=ok>done</span>`;
 document.getElementById('f-'+id).style.width='100%';
 document.getElementById('a-'+id).innerHTML=`
  <a href="${r.url}" target=_blank>üëÅÔ∏è View</a>
  <a href="${r.download}">‚¨áÔ∏è Download</a>
  <button onclick="copy('${r.url}')">üìã Copy</button>`;
 pop('‚úÖ '+f.name+' uploaded');
}
function showErr(id,txt){document.getElementById('m-'+id).innerHTML=`<span class=err>${txt}</span>`;pop('‚ùå '+txt,true);}
function ajax(u,d,prog,cb){const x=new XMLHttpRequest();x.upload.onprogress=e=>e.lengthComputable&&prog(e.loaded*100/e.total);x.onload=()=>cb(JSON.parse(x.response||'{}'));x.onerror=()=>cb({error:'net'});x.open('POST',u);x.send(d);}
function fmt(b){const k=1024,s=['B','KB','MB','GB'];let i=Math.floor(Math.log(b)/Math.log(k));return( b/Math.pow(k,i)).toFixed(2)+' '+s[i];}
function copy(t){navigator.clipboard.writeText(t).then(()=>pop('copied'));}
function pop(t,err){toast.textContent=t;toast.style.background=err?'var(--err)':'var(--p)';toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),3e3);}
</script>
</body>
</html>
